@using HE.Remediation.Core.Enums
@model HE.Remediation.WebApp.ViewModels.BuildingDetails.ConstructionCompletionDateViewModel
@{
    ViewData["Title"] = "Add a date of completion (Optional)";
    ViewData["BackLink"] = Url.Action("ResponsibleForTheRemediation", "BuildingDetails", new { Area = "BuildingDetails" });
    ViewData["FullWidth"] = false;

     var errors = ViewData.ModelState.Where(x => x.Value.Errors.Any()).ToList();
     var isConstructionCompletionDateError = errors.Any(x => x.Key is nameof(Model.ConstructionCompletionDateMonth) or nameof(Model.ConstructionCompletionDateYear));
}
@section ErrorSummary
{
    <govuk-error-summary>
        <govuk-error-summary-item asp-for="ConstructionCompletionDateMonth" />
        <govuk-error-summary-item asp-for="ConstructionCompletionDateYear" />
    </govuk-error-summary>
}

<form method="post" asp-area="BuildingDetails" asp-controller="BuildingDetails" asp-action="ConstructionCompletionDate">
    <h1 class="govuk-heading-xl">Add a date of completion (Optional)</h1>

    <div class="govuk-form-group @(isConstructionCompletionDateError ? "govuk-form-group--error" : string.Empty)">
        <fieldset class="govuk-fieldset" role="group" aria-describedby="refurbishment-completion-date-hint">
            <div id="refurbishment-completion-hint" class="govuk-hint">
                For example, 8 2022
            </div>
            <govuk-error-message asp-for="ConstructionCompletionDateMonth" />
            <govuk-error-message asp-for="ConstructionCompletionDateYear" />
            <div class="govuk-date-input" id="refurbishment-completion-date">
                <div class="govuk-date-input__item">
                    <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" asp-for="ConstructionCompletionDateMonth">
                            Month
                        </label>
                        <input class="govuk-input govuk-date-input__input govuk-input--width-2" asp-for="ConstructionCompletionDateMonth" type="number" inputmode="numeric">
                    </div>
                </div>
                <div class="govuk-date-input__item">
                    <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" asp-for="ConstructionCompletionDateYear">
                            Year
                        </label>
                        <input class="govuk-input govuk-date-input__input govuk-input--width-4" asp-for="ConstructionCompletionDateYear" type="number" inputmode="numeric">
                    </div>
                </div>
            </div>
        </fieldset>
    </div>

    <input asp-for="ReturnUrl" type="hidden" value="@Model.ReturnUrl" />

    <div class="comp-btn-group">
        <govuk-button name="SubmitAction" value="@(ESubmitAction.Continue)">Save and continue</govuk-button>
        <govuk-button name="SubmitAction" value="@(ESubmitAction.Exit)" class="govuk-button--secondary">Save and return later</govuk-button>
    </div>
</form>