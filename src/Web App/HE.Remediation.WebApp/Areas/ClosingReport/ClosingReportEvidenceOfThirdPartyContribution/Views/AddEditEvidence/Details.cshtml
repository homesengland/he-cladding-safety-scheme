@using HE.Remediation.Core.Enums;
@using HE.Remediation.Core.Extensions
@using GovUk.Frontend.AspNetCore.TagHelpers
@model HE.Remediation.WebApp.ViewModels.ClosingReport.AddEditEvidenceDetailsViewModel
@{
    ViewData["Title"] = "Final Report";
    ViewData["Backlink"] = Model.ViaCheckAnswer ? Url.Action("CheckYourAnswers", new { id = Model.Id }) : Url.Action("EvidenceDetails", "EvidenceOfThirdPartyContribution", new { Area = "ClosingReportEvidenceOfThirdPartyContribution" });
    ViewData["FullWidth"] = true;
    ViewData["Readonly"] = false;
    ViewData["ExitLinkHidden"] = true;

    var checkedNotYetStarted = Model.StatusOfAttempt == EThirdPartyContributionStatusOfAttempt.NotYetStarted;
    var checkedInProgress = Model.StatusOfAttempt == EThirdPartyContributionStatusOfAttempt.InProgress;
    var checkedSuccess = Model.StatusOfAttempt == EThirdPartyContributionStatusOfAttempt.Success;
    var checkedFail = Model.StatusOfAttempt == EThirdPartyContributionStatusOfAttempt.Fail;
}

@section ErrorSummary
{
    <govuk-error-summary>
        <govuk-error-summary-item asp-for="ThirdPartyName" />
        <govuk-error-summary-item asp-for="DateOfAttempt" />
        <govuk-error-summary-item asp-for="StatusOfAttempt" />
    </govuk-error-summary>
}


<h1 class="govuk-heading-xl govuk-!-margin-bottom-4">Submit Third Party Contribution Evidence Details</h1>

<h2 class="govuk-heading-s">Please set out the details of the claim below and provide as much information as you can.</h2>

@using (Html.BeginForm("Details", "AddEditEvidence", new { Area = "ClosingReportEvidenceOfThirdPartyContribution", id = (Guid?)null }))
{
    <govuk-date-input asp-for="DateOfAttempt" name="DateOfAttempt">
        <govuk-date-input-fieldset class="govuk-!-margin-top-5">
            <govuk-date-input-fieldset-legend class="govuk-fieldset__legend--s govuk-!-margin-bottom-0">
                Date of attempt
            </govuk-date-input-fieldset-legend>
        </govuk-date-input-fieldset>
        <govuk-date-input-label></govuk-date-input-label>
        <govuk-date-input-hint>
            For example, 27 8 2022
        </govuk-date-input-hint>
    </govuk-date-input>

    <govuk-input asp-for="ThirdPartyName" name="ThirdPartyName" input-class="govuk-input--width-20" inputmode="text" spellcheck="false">
        <govuk-input-label is-page-heading="false" class="govuk-label--s">Third Party Name</govuk-input-label>
    </govuk-input>


    <govuk-radios asp-for="StatusOfAttempt">
        <govuk-radios-fieldset>
            <govuk-radios-fieldset-legend class="govuk-fieldset__legend--s">
                Status of attempt
            </govuk-radios-fieldset-legend>
        </govuk-radios-fieldset>
        <govuk-radios-item value="@(EThirdPartyContributionStatusOfAttempt.NotYetStarted)" checked="@checkedNotYetStarted">Not yet started</govuk-radios-item>
        <govuk-radios-item value="@(EThirdPartyContributionStatusOfAttempt.InProgress)" checked="@checkedInProgress">In Progress</govuk-radios-item>
        <govuk-radios-item value="@(EThirdPartyContributionStatusOfAttempt.Success)" checked="@checkedSuccess">Success</govuk-radios-item>
        <govuk-radios-item value="@(EThirdPartyContributionStatusOfAttempt.Fail)" checked="@checkedFail">Fail</govuk-radios-item>
    </govuk-radios>

    <govuk-button name="SubmitAction" value="Continue">Continue</govuk-button>

    <input type="hidden" asp-for="Id" value="@Model.Id" />
    <input type="hidden" asp-for="Amount" value="@Model.Amount" />
    <input type="hidden" asp-for="AttemptDetails" value="@Model.AttemptDetails" />
    <input type="hidden" asp-for="ViaCheckAnswer" value="@Model.ViaCheckAnswer" />
}

<div>
    <a class="govuk-link" href="@Url.Action( "CancelAndExit", new { id = Model.Id })">Cancel and exit</a>
</div>


